{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/ivopascoal/Desktop/FARMBOY/HonestWorkFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/ivopascoal/Desktop/FARMBOY/HonestWorkFarms/src/contexts/Localisation/languageContext.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { StringTranslations } from '@crowdin/crowdin-api-client';\nimport { TranslationsContext } from 'contexts/Localisation/translationsContext';\nimport { allLanguages, EN } from 'config/localisation/languageCodes';\nvar CACHE_KEY = 'pancakeSwapLanguage';\nvar LanguageContext = /*#__PURE__*/React.createContext({\n  selectedLanguage: EN,\n  setSelectedLanguage: function setSelectedLanguage() {\n    return undefined;\n  },\n  translatedLanguage: EN,\n  setTranslatedLanguage: function setTranslatedLanguage() {\n    return undefined;\n  }\n});\nvar fileId = 8;\nvar projectId = parseInt(process.env.REACT_APP_CROWDIN_PROJECTID);\nvar stringTranslationsApi = new StringTranslations({\n  token: process.env.REACT_APP_CROWDIN_APIKEY\n});\n\nvar fetchTranslationsForSelectedLanguage = function fetchTranslationsForSelectedLanguage(selectedLanguage) {\n  return stringTranslationsApi.listLanguageTranslations(projectId, selectedLanguage.code, undefined, fileId, 200);\n};\n\nvar LanguageContextProvider = function LanguageContextProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useState = useState(EN),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedLanguage = _useState2[0],\n      setSelectedLanguage = _useState2[1];\n\n  var _useState3 = useState(EN),\n      _useState4 = _slicedToArray(_useState3, 2),\n      translatedLanguage = _useState4[0],\n      setTranslatedLanguage = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      translations = _useState6[0],\n      setTranslations = _useState6[1];\n\n  var getStoredLang = function getStoredLang(storedLangCode) {\n    return allLanguages.filter(function (language) {\n      return language.code === storedLangCode;\n    })[0];\n  };\n\n  useEffect(function () {\n    var storedLangCode = localStorage.getItem(CACHE_KEY);\n\n    if (storedLangCode) {\n      var storedLang = getStoredLang(storedLangCode);\n      setSelectedLanguage(storedLang);\n    } else {\n      setSelectedLanguage(EN);\n    }\n  }, []);\n  useEffect(function () {\n    if (selectedLanguage) {\n      console.log(\"import(`../../../public/i18n/\".concat(selectedLanguage.code, \".json`)\"));\n      fetch(\"./i18n/\".concat(selectedLanguage.code, \".json\")).then(function (r) {\n        return r.json();\n      }) // fetchTranslationsForSelectedLanguage(selectedLanguage)\n      .then(function (translationApiResponse) {\n        if (translationApiResponse.data.length < 1) {\n          setTranslations(['error']);\n        } else {\n          setTranslations(translationApiResponse.data);\n        }\n      }).then(function () {\n        return setTranslatedLanguage(selectedLanguage);\n      })[\"catch\"](function (e) {\n        console.error(\"ERROR\");\n        console.error(e);\n        setTranslations(['error']);\n      });\n    }\n  }, [selectedLanguage, setTranslations]);\n\n  var handleLanguageSelect = function handleLanguageSelect(langObject) {\n    setSelectedLanguage(langObject);\n    localStorage.setItem(CACHE_KEY, langObject.code);\n  };\n\n  return /*#__PURE__*/_jsxDEV(LanguageContext.Provider, {\n    value: {\n      selectedLanguage: selectedLanguage,\n      setSelectedLanguage: handleLanguageSelect,\n      translatedLanguage: translatedLanguage,\n      setTranslatedLanguage: setTranslatedLanguage\n    },\n    children: /*#__PURE__*/_jsxDEV(TranslationsContext.Provider, {\n      value: {\n        translations: translations,\n        setTranslations: setTranslations\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(LanguageContextProvider, \"xBwFn6rM05cDs06lVQZtx43Z7xc=\");\n\n_c = LanguageContextProvider;\nexport { LanguageContext, LanguageContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"LanguageContextProvider\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/FARMBOY/HonestWorkFarms/src/contexts/Localisation/languageContext.tsx"],"names":["React","useState","useEffect","StringTranslations","TranslationsContext","allLanguages","EN","CACHE_KEY","LanguageContext","createContext","selectedLanguage","setSelectedLanguage","undefined","translatedLanguage","setTranslatedLanguage","fileId","projectId","parseInt","process","env","REACT_APP_CROWDIN_PROJECTID","stringTranslationsApi","token","REACT_APP_CROWDIN_APIKEY","fetchTranslationsForSelectedLanguage","listLanguageTranslations","code","LanguageContextProvider","children","translations","setTranslations","getStoredLang","storedLangCode","filter","language","localStorage","getItem","storedLang","console","log","fetch","then","r","json","translationApiResponse","data","length","e","error","handleLanguageSelect","langObject","setItem"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { StringTranslations } from '@crowdin/crowdin-api-client'\r\nimport { TranslationsContext } from 'contexts/Localisation/translationsContext'\r\nimport { allLanguages, EN } from 'config/localisation/languageCodes'\r\n\r\nconst CACHE_KEY = 'pancakeSwapLanguage'\r\n\r\nexport interface LangType {\r\n  code: string\r\n  language: string\r\n}\r\n\r\nexport interface LanguageState {\r\n  selectedLanguage: LangType\r\n  setSelectedLanguage: (langObject: LangType) => void\r\n  translatedLanguage: LangType\r\n  setTranslatedLanguage: React.Dispatch<React.SetStateAction<LangType>>\r\n}\r\n\r\nconst LanguageContext = React.createContext({\r\n  selectedLanguage: EN,\r\n  setSelectedLanguage: () => undefined,\r\n  translatedLanguage: EN,\r\n  setTranslatedLanguage: () => undefined,\r\n} as LanguageState)\r\n\r\nconst fileId = 8\r\nconst projectId = parseInt(process.env.REACT_APP_CROWDIN_PROJECTID)\r\nconst stringTranslationsApi = new StringTranslations({\r\n  token: process.env.REACT_APP_CROWDIN_APIKEY,\r\n})\r\n\r\nconst fetchTranslationsForSelectedLanguage = (selectedLanguage) => {\r\n  return stringTranslationsApi.listLanguageTranslations(projectId, selectedLanguage.code, undefined, fileId, 200)\r\n}\r\n\r\nconst LanguageContextProvider = ({ children }) => {\r\n  const [selectedLanguage, setSelectedLanguage] = useState<any>(EN)\r\n  const [translatedLanguage, setTranslatedLanguage] = useState<any>(EN)\r\n  const [translations, setTranslations] = useState<Array<any>>([])\r\n\r\n  const getStoredLang = (storedLangCode: string) => {\r\n    return allLanguages.filter((language) => {\r\n      return language.code === storedLangCode\r\n    })[0]\r\n  }\r\n\r\n  useEffect(() => {\r\n    const storedLangCode = localStorage.getItem(CACHE_KEY)\r\n    if (storedLangCode) {\r\n      const storedLang = getStoredLang(storedLangCode)\r\n      setSelectedLanguage(storedLang)\r\n    } else {\r\n      setSelectedLanguage(EN)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (selectedLanguage) {\r\n      console.log(`import(\\`../../../public/i18n/${selectedLanguage.code}.json\\`)`);\r\n      fetch(`./i18n/${selectedLanguage.code}.json`)\r\n        .then(r=>r.json())\r\n      // fetchTranslationsForSelectedLanguage(selectedLanguage)\r\n        .then((translationApiResponse) => {\r\n          if (translationApiResponse.data.length < 1) {\r\n            setTranslations(['error'])\r\n          } else {\r\n            setTranslations(translationApiResponse.data)\r\n          }\r\n        })\r\n        .then(() => setTranslatedLanguage(selectedLanguage))\r\n        .catch((e) => {\r\n          console.error(\"ERROR\");\r\n          console.error(e);\r\n          setTranslations(['error'])\r\n        })\r\n    }\r\n  }, [selectedLanguage, setTranslations])\r\n\r\n  const handleLanguageSelect = (langObject: LangType) => {\r\n    setSelectedLanguage(langObject)\r\n    localStorage.setItem(CACHE_KEY, langObject.code)\r\n  }\r\n\r\n  return (\r\n    <LanguageContext.Provider\r\n      value={{ selectedLanguage, setSelectedLanguage: handleLanguageSelect, translatedLanguage, setTranslatedLanguage }}\r\n    >\r\n      <TranslationsContext.Provider value={{ translations, setTranslations }}>{children}</TranslationsContext.Provider>\r\n    </LanguageContext.Provider>\r\n  )\r\n}\r\n\r\nexport { LanguageContext, LanguageContextProvider }\r\n"]},"metadata":{},"sourceType":"module"}